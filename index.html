<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì •ì‚° ë§í¬ ìƒì„±ê¸°</title>
    <!-- OGP íƒœê·¸ ì‹œì‘ (ë§í¬ ë¯¸ë¦¬ë³´ê¸°ìš©) -->
    <meta property="og:type" content="website">
    <!-- URLì€ í˜ì´ì§€ ë¡œë“œ ì‹œ window.location.hrefë¡œ ì„¤ì •ë©ë‹ˆë‹¤. -->
    <meta property="og:url" id="ogUrl" content=""> 
    <meta property="og:title" id="ogTitle" content="ë”ì¹˜í˜ì´ ì •ì‚° ë§í¬ ìƒì„± ë° ê³µìœ ">
    <meta property="og:description" id="ogDescription" content="ë³µì¡í•œ ì •ì‚°, ì´ ë§í¬ í•˜ë‚˜ë¡œ ë! ê¸ˆì•¡ê³¼ ê³„ì¢Œ ì •ë³´ë¥¼ QR ì½”ë“œë¡œ ê°„í¸í•˜ê²Œ ê³µìœ í•˜ì„¸ìš”.">
    <!-- OGP íƒœê·¸ ì¢…ë£Œ -->

    <!-- Tailwind CSS CDN ë¡œë“œ -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- QR Code Library CDN ë¡œë“œ (qrcode.js ì‚¬ìš©) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f7f7f7;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        /* Custom style for the subtle background change on copy success */
        .copy-success {
            transition: background-color 0.3s ease-in-out;
            background-color: #d1fae5 !important; /* Tailwind green-100 */
        }
        /* Style for the copy message overlay */
        .copy-message-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: rgba(209, 250, 229, 0.95); /* green-100 with opacity */
            border-radius: 0.5rem; /* rounded-lg */
            font-size: 1.125rem; /* text-xl */
            font-weight: 700; /* font-bold */
            color: #065f46; /* green-700 */
            z-index: 10;
        }
    </style>
</head>
<body class="p-4">

    <!-- ë©”ì¸ ì»¨í…Œì´ë„ˆ -->
    <div id="app-container" class="w-full max-w-lg bg-white shadow-xl rounded-xl p-6 md:p-8">
        <h1 class="text-3xl font-extrabold text-center text-indigo-700 mb-6">ì •ì‚° ë§í¬ ìƒì„± ë° ê³µìœ </h1>

        <!-- 1. ì…ë ¥ í¼ (URL íŒŒë¼ë¯¸í„°ê°€ ì—†ì„ ë•Œ í‘œì‹œ) -->
        <div id="input-form-section">
            <div class="space-y-4">
                <p class="text-sm text-gray-500 mb-6 text-center">
                    ì •ì‚° ì •ë³´ë¥¼ ì…ë ¥í•˜ê³  ë§í¬ë¥¼ ìƒì„±í•˜ì„¸ìš”. ì´ ë§í¬ë¥¼ QR ì½”ë“œë¡œ ë§Œë“¤ì–´ ê³µìœ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                </p>

                <!-- 1.1. ê¸ˆì•¡ ê³„ì‚°/ì…ë ¥ -->
                <div id="amount-input-group" class="p-4 bg-indigo-50 rounded-lg border border-indigo-200">
                    <label for="totalAmount" class="block text-lg font-semibold text-indigo-700 mb-1">ì´ ê¸ˆì•¡ / ì¸ë‹¹ ê¸ˆì•¡ ì„¤ì •</label>
                    <div id="calc-input-group" class="flex items-center space-x-2 mb-2">
                        <!-- ë ˆì´ì•„ì›ƒ ë¬¸ì œ í•´ê²°ì„ ìœ„í•´ flex-1 ëŒ€ì‹  w-5/12 ì‚¬ìš© -->
                        <input type="number" id="totalAmount" placeholder="ì´ ê²°ì œ ê¸ˆì•¡ (ì„ íƒ)" class="w-5/12 p-3 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500">
                        <span class="text-gray-500">Ã·</span>
                        <!-- ë ˆì´ì•„ì›ƒ ë¬¸ì œ í•´ê²°ì„ ìœ„í•´ flex-1 ëŒ€ì‹  w-5/12 ì‚¬ìš© -->
                        <input type="number" id="numPeople" placeholder="ì¸ì›ìˆ˜ (ì„ íƒ)" class="w-5/12 p-3 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500">
                        <button id="calculateBtn" class="bg-indigo-500 text-white p-3 rounded-lg hover:bg-indigo-600 transition duration-150 whitespace-nowrap">ê³„ì‚°</button>
                    </div>
                    <p id="calc-result" class="text-sm text-gray-600 h-5"></p>
                    
                    <label for="amountPerPerson" class="block text-sm font-medium text-gray-700 mt-4 mb-1">
                        âœ¨ ì¸ë‹¹ ì†¡ê¸ˆì•¡ (í•„ìˆ˜)
                    </label>
                    <input type="number" id="amountPerPerson" required placeholder="ì˜ˆ: 15000" class="w-full p-3 border-2 border-indigo-400 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 font-bold text-xl">
                </div>

                <!-- 1.2. ê³„ì¢Œ ì •ë³´ -->
                <div>
                    <label for="bankName" class="block text-sm font-medium text-gray-700 mb-1">ì€í–‰ëª… (í•„ìˆ˜)</label>
                    <input type="text" id="bankName" required placeholder="ì˜ˆ: ì¹´ì¹´ì˜¤ë±…í¬, êµ­ë¯¼ì€í–‰" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500">
                </div>

                <div>
                    <label for="accountNumber" class="block text-sm font-medium text-gray-700 mb-1">ê³„ì¢Œë²ˆí˜¸ (í•„ìˆ˜)</label>
                    <input type="text" id="accountNumber" required placeholder="ìˆ«ìë§Œ ì…ë ¥í•´ ì£¼ì„¸ìš”" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500">
                </div>

                <div>
                    <label for="accountHolder" class="block text-sm font-medium text-gray-700 mb-1">ì˜ˆê¸ˆì£¼ (í•„ìˆ˜)</label>
                    <input type="text" id="accountHolder" required placeholder="ì˜ˆ: í™ê¸¸ë™" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500">
                </div>

                <button id="generateBtn" class="w-full bg-green-600 text-white font-bold py-3 rounded-lg hover:bg-green-700 transition duration-150 shadow-md">
                    ì •ì‚° ë§í¬ ìƒì„±í•˜ê¸°
                </button>
            </div>
            
            <!-- ìƒì„±ëœ ë§í¬ í‘œì‹œ ì˜ì—­ -->
            <div id="link-output-area" class="mt-8 p-4 bg-gray-100 rounded-lg hidden">
                <p class="font-semibold text-gray-700 mb-2">âœ… ê³µìœ í•  ì •ì‚° ë§í¬ê°€ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤:</p>
                <div class="flex items-center space-x-2">
                    <input type="text" id="generatedLink" readonly class="flex-1 p-3 border border-gray-300 rounded-lg bg-white text-sm truncate">
                    <button id="copyLinkBtn" class="bg-indigo-600 text-white px-4 py-3 rounded-lg hover:bg-indigo-700 transition duration-150 whitespace-nowrap">
                        ë³µì‚¬
                    </button>
                </div>

                <!-- QR ì½”ë“œ ì¶œë ¥ ì˜ì—­ ì¶”ê°€ -->
                <div class="mt-4 p-4 bg-white rounded-lg shadow-inner flex justify-center flex-col items-center">
                    <p class="font-bold text-gray-700 mb-3">ğŸ“¸ QR ì½”ë“œë¡œ ë°”ë¡œ ìŠ¤ìº”í•˜ì„¸ìš”</p>
                    <div id="qrcode-container" class="p-2 border border-gray-300 rounded-lg bg-white">
                        <!-- QR ì½”ë“œê°€ ì—¬ê¸°ì— ìƒì„±ë©ë‹ˆë‹¤ -->
                    </div>
                </div>

                <p class="text-xs text-red-500 mt-2">
                    * ì´ ë§í¬ë¥¼ QR ì½”ë“œë¡œ ë³€í™˜í•˜ì—¬ ì‚¬ìš©í•˜ê±°ë‚˜ ë©”ì‹œì§€ë¡œ ê³µìœ í•˜ì„¸ìš”.
                </p>
            </div>
        </div>

        <!-- 2. ê²°ê³¼ í‘œì‹œ (URL íŒŒë¼ë¯¸í„°ê°€ ìˆì„ ë•Œ í‘œì‹œ) -->
        <div id="result-display-section" class="hidden text-center">
            <!-- SVG ì•„ì´ì½˜ ìˆ˜ì •: ê¹¨ì§€ëŠ” ì•„ì´ì½˜ ëŒ€ì‹  ì§€ê°‘/ëˆ ëª¨ì–‘ ì•„ì´ì½˜ìœ¼ë¡œ êµì²´ -->
            <svg class="mx-auto h-16 w-16 text-green-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z" />
            </svg>
            <h2 class="text-3xl font-bold text-gray-800 mt-4">ì •ì‚° ìš”ì²­</h2>
            <p class="text-lg text-gray-600 mt-2 mb-8">ì•„ë˜ ê³„ì¢Œë¡œ ê¸ˆì•¡ì„ ì†¡ê¸ˆí•´ ì£¼ì„¸ìš”. (í„°ì¹˜ ì‹œ ì •ë³´ê°€ ë³µì‚¬ë©ë‹ˆë‹¤!)</p>

            <div class="space-y-4 p-6 bg-green-50 rounded-xl border-4 border-green-300 shadow-lg">
                <div class="text-left">
                    <p class="text-2xl font-bold text-green-700">ì†¡ê¸ˆí•  ê¸ˆì•¡</p>
                    <p id="displayAmount" class="5xl font-extrabold text-green-900 mt-1">0ì›</p>
                </div>
                
                <div class="border-t border-green-200 pt-4 space-y-2 text-left">
                    <!-- ì€í–‰ëª… ë³µì‚¬ ê°€ëŠ¥í•˜ë„ë¡ ìˆ˜ì • (relative ì¶”ê°€) -->
                    <div id="copyBank" class="flex justify-between items-center bg-white p-3 rounded-lg cursor-pointer hover:bg-gray-50 transition duration-100 relative">
                        <span class="font-medium text-gray-500">ì€í–‰ëª…</span>
                        <span id="displayBank" class="font-semibold text-gray-800"></span>
                    </div>
                    <!-- ê³„ì¢Œë²ˆí˜¸ ë³µì‚¬ ê°€ëŠ¥í•˜ë„ë¡ ìˆ˜ì • (relative ì¶”ê°€) -->
                    <div id="copyAccount" class="flex justify-between items-center bg-white p-3 rounded-lg cursor-pointer hover:bg-gray-50 transition duration-100 relative">
                        <span class="font-medium text-gray-500">ê³„ì¢Œë²ˆí˜¸</span>
                        <span id="displayAccount" class="font-semibold text-gray-800"></span>
                    </div>
                    <!-- ì˜ˆê¸ˆì£¼ ë³µì‚¬ ê°€ëŠ¥í•˜ë„ë¡ ìˆ˜ì • (relative ì¶”ê°€) -->
                    <div id="copyHolder" class="flex justify-between items-center bg-white p-3 rounded-lg cursor-pointer hover:bg-gray-50 transition duration-100 relative">
                        <span class="font-medium text-gray-500">ì˜ˆê¸ˆì£¼</span>
                        <span id="displayHolder" class="font-semibold text-gray-800"></span>
                    </div>
                </div>
            </div>

            <p class="text-sm text-gray-500 mt-6">
                í˜ì´ì§€ê°€ ë‹¤ì‹œ í•„ìš”í•˜ë©´ ì´ ë§í¬ë¥¼ ë¶ë§ˆí¬í•˜ê±°ë‚˜ ì €ì¥í•˜ì„¸ìš”.
            </p>
            <button onclick="window.location.href = window.location.pathname" class="mt-4 text-indigo-600 hover:text-indigo-800 font-medium">
                ìƒˆë¡œìš´ ë§í¬ ìƒì„±í•˜ê¸°
            </button>
        </div>
    </div>

    <script>
        // ì „ì—­ ë³€ìˆ˜ ì„¤ì •
        const amountInput = document.getElementById('amountPerPerson');
        const bankInput = document.getElementById('bankName');
        const accountInput = document.getElementById('accountNumber');
        const holderInput = document.getElementById('accountHolder');
        const generateBtn = document.getElementById('generateBtn');
        const calculateBtn = document.getElementById('calculateBtn');
        const totalAmountInput = document.getElementById('totalAmount');
        const numPeopleInput = document.getElementById('numPeople');
        const calcResult = document.getElementById('calc-result');

        const inputSection = document.getElementById('input-form-section');
        const resultSection = document.getElementById('result-display-section');
        const generatedLinkInput = document.getElementById('generatedLink');
        const copyLinkBtn = document.getElementById('copyLinkBtn');
        const qrcodeContainer = document.getElementById('qrcode-container');
        
        // ì •ì‚° ìš”ì²­ í˜ì´ì§€ì˜ ë³µì‚¬ ëŒ€ìƒ ìš”ì†Œ
        const copyBankElement = document.getElementById('copyBank');
        const copyAccountElement = document.getElementById('copyAccount');
        const copyHolderElement = document.getElementById('copyHolder');

        // OGP ê´€ë ¨ ë©”íƒ€ íƒœê·¸ ìš”ì†Œ
        const ogUrl = document.getElementById('ogUrl');
        const ogTitle = document.getElementById('ogTitle');
        const ogDescription = document.getElementById('ogDescription');


        /**
         * ìˆ«ìë¥¼ í•œêµ­ í†µí™” í˜•ì‹ìœ¼ë¡œ í¬ë§·í•©ë‹ˆë‹¤.
         * @param {number} number
         */
        const formatCurrency = (number) => {
            return new Intl.NumberFormat('ko-KR', {
                style: 'currency',
                currency: 'KRW',
                minimumFractionDigits: 0
            }).format(number);
        };

        /**
         * í´ë¦½ë³´ë“œì— í…ìŠ¤íŠ¸ë¥¼ ë³µì‚¬í•˜ê³  ì‹œê°ì  í”¼ë“œë°±ì„ ì œê³µí•©ë‹ˆë‹¤.
         * @param {string} textToCopy ë³µì‚¬í•  í…ìŠ¤íŠ¸
         * @param {HTMLElement} element ë³µì‚¬ ì„±ê³µ ì‹œ ìŠ¤íƒ€ì¼ì„ ì ìš©í•  HTML ìš”ì†Œ (ë³µì‚¬ ëŒ€ìƒ div)
         */
        function copyToClipboard(textToCopy, element) {
            // ì„ì‹œ input ìš”ì†Œë¥¼ ìƒì„±í•˜ì—¬ ë³µì‚¬ ì‘ì—…ì„ ìˆ˜í–‰
            const tempInput = document.createElement('input');
            tempInput.value = textToCopy;
            document.body.appendChild(tempInput);
            tempInput.select();
            
            let successful = false;
            try {
                successful = document.execCommand('copy');
            } catch (err) {
                console.error('í´ë¦½ë³´ë“œ ë³µì‚¬ ì˜¤ë¥˜:', err);
            }
            
            document.body.removeChild(tempInput);

            if (successful) {
                // 1. ë©”ì‹œì§€ ì˜¤ë²„ë ˆì´ ìƒì„±
                const messageOverlay = document.createElement('div');
                messageOverlay.textContent = 'âœ… ë³µì‚¬ ì™„ë£Œ!';
                messageOverlay.classList.add('copy-message-overlay'); // CSS í´ë˜ìŠ¤ ì‚¬ìš©

                // 2. ì˜¤ë²„ë ˆì´ ì¶”ê°€ ë° ë°°ê²½ìƒ‰ ë³€ê²½ (copy-success í´ë˜ìŠ¤ ì‚¬ìš©)
                element.classList.add('copy-success');
                element.appendChild(messageOverlay);

                // 3. 1ì´ˆ í›„ ì˜¤ë²„ë ˆì´ ì œê±° ë° í´ë˜ìŠ¤ ë³µêµ¬
                setTimeout(() => {
                    element.classList.remove('copy-success');
                    if (element.contains(messageOverlay)) {
                        element.removeChild(messageOverlay);
                    }
                }, 1000);

            } else {
                console.error('ë³µì‚¬ ëª…ë ¹ ì‹¤íŒ¨.');
            }
        }

        /**
         * ì´ ê¸ˆì•¡ê³¼ ì¸ì›ìˆ˜ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì¸ë‹¹ ì†¡ê¸ˆì•¡ì„ ê³„ì‚°í•©ë‹ˆë‹¤.
         */
        calculateBtn.addEventListener('click', () => {
            const total = parseInt(totalAmountInput.value);
            const num = parseInt(numPeopleInput.value);

            if (isNaN(total) || isNaN(num) || num <= 0) {
                // ì»¤ìŠ¤í…€ ì•Œë¦¼ UIë¥¼ ì‚¬ìš©í•´ì•¼ í•˜ì§€ë§Œ, ì—¬ê¸°ì„œëŠ” ì„ì‹œë¡œ ì½˜ì†” ë©”ì‹œì§€ë¡œ ëŒ€ì²´
                console.error('ì´ ê¸ˆì•¡ê³¼ ì¸ì›ìˆ˜ë¥¼ ì •í™•íˆ ì…ë ¥í•´ ì£¼ì„¸ìš”.');
                calcResult.textContent = 'ì´ ê¸ˆì•¡ê³¼ ì¸ì›ìˆ˜ë¥¼ ì •í™•íˆ ì…ë ¥í•´ ì£¼ì„¸ìš”.';
                return;
            }

            const perPerson = Math.ceil(total / num); // ì˜¬ë¦¼ ì²˜ë¦¬í•˜ì—¬ ê³„ì‚°
            amountInput.value = perPerson;
            calcResult.textContent = `ê³„ì‚° ê²°ê³¼: ì¸ë‹¹ ${formatCurrency(perPerson)} (${total} Ã· ${num})`;
        });

        /**
         * ì…ë ¥ í•„ë“œë¥¼ ë¹„í™œì„±í™”í•˜ê³  ê´€ë ¨ ë²„íŠ¼ì„ ìˆ¨ê¹ë‹ˆë‹¤.
         */
        function disableInputFields() {
            // 1. í•„ìˆ˜ ì…ë ¥ í•„ë“œë¥¼ ì½ê¸° ì „ìš©ìœ¼ë¡œ ì„¤ì • ë° ìŠ¤íƒ€ì¼ ë³€ê²½
            const primaryInputs = [amountInput, bankInput, accountInput, holderInput];
            
            primaryInputs.forEach(input => {
                input.setAttribute('readonly', true);
                // ì½ê¸° ì „ìš© ìƒíƒœë¥¼ ëª…í™•íˆ ë³´ì—¬ì£¼ê¸° ìœ„í•´ ìŠ¤íƒ€ì¼ ë³€ê²½
                input.classList.add('bg-gray-100', 'text-gray-700', 'cursor-default');
                input.classList.remove('focus:ring-indigo-500', 'focus:border-indigo-500', 'border-indigo-400');
            });
            
            // 2. ê³„ì‚° ê´€ë ¨ í•„ë“œ/ë²„íŠ¼ ìˆ¨ê¸°ê¸°
            const calcInputGroup = document.getElementById('calc-input-group');
            if (calcInputGroup) {
                calcInputGroup.classList.add('hidden');
            }
            calcResult.classList.add('hidden');
            
            // 3. ì •ì‚° ë§í¬ ìƒì„±í•˜ê¸° ë²„íŠ¼ ìˆ¨ê¸°ê¸°
            generateBtn.classList.add('hidden');
        }

        /**
         * ì…ë ¥ëœ ì •ë³´ë¥¼ URL íŒŒë¼ë¯¸í„°ë¡œ ì¸ì½”ë”©í•˜ì—¬ ë§í¬ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.
         */
        generateBtn.addEventListener('click', () => {
            const amount = amountInput.value.trim();
            const bank = bankInput.value.trim();
            const account = accountInput.value.trim();
            const holder = holderInput.value.trim();

            if (!amount || !bank || !account || !holder) {
                // ì»¤ìŠ¤í…€ ì•Œë¦¼ UIë¥¼ ì‚¬ìš©í•´ì•¼ í•˜ì§€ë§Œ, ì—¬ê¸°ì„œëŠ” ì„ì‹œë¡œ ì½˜ì†” ë©”ì‹œì§€ë¡œ ëŒ€ì²´
                console.error('ëª¨ë“  í•„ìˆ˜ ì •ë³´ë¥¼ ì…ë ¥í•´ ì£¼ì„¸ìš”.');
                return;
            }

            if (isNaN(parseInt(amount))) {
                // ì»¤ìŠ¤í…€ ì•Œë¦¼ UIë¥¼ ì‚¬ìš©í•´ì•¼ í•˜ì§€ë§Œ, ì—¬ê¸°ì„œëŠ” ì„ì‹œë¡œ ì½˜ì†” ë©”ì‹œì§€ë¡œ ëŒ€ì²´
                console.error('ì†¡ê¸ˆì•¡ì€ ìˆ«ìì—¬ì•¼ í•©ë‹ˆë‹¤.');
                return;
            }

            // URL íŒŒë¼ë¯¸í„°ì— ë“¤ì–´ê°ˆ ë°ì´í„°ë¥¼ ì •ì˜ (ê°„ê²°í•œ íŒŒë¼ë¯¸í„° ì´ë¦„ ì‚¬ìš©)
            const params = new URLSearchParams();
            params.append('a', amount); // Amount
            params.append('b', bank);   // Bank Name
            params.append('c', account);// Account Number
            params.append('d', holder); // Account Holder

            // í˜„ì¬ URLì˜ ê²½ë¡œ + ì¿¼ë¦¬ ìŠ¤íŠ¸ë§ìœ¼ë¡œ ë§í¬ ìƒì„±
            const generatedUrl = window.location.origin + window.location.pathname + '?' + params.toString();
            
            generatedLinkInput.value = generatedUrl;
            document.getElementById('link-output-area').classList.remove('hidden');

            // --- OGP íƒœê·¸ ë™ì  ì—…ë°ì´íŠ¸ (ë§í¬ ìƒì„± ì‹œì ì—ì„œëŠ” ì‚¬ìš©ìê°€ í˜ì´ì§€ì— ë¨¸ë¬¼ëŸ¬ ìˆì§€ë§Œ, ê³µìœ ë˜ëŠ” URLì— ë°˜ì˜) ---
            updateOGPMeta(amount, bank, holder, generatedUrl);

            // --- QR ì½”ë“œ ìƒì„± ë¡œì§ ---
            qrcodeContainer.innerHTML = ''; // ê¸°ì¡´ QR ì½”ë“œ ì‚­ì œ

            new QRCode(qrcodeContainer, {
                text: generatedUrl,
                width: 180,
                height: 180,
                colorDark : "#000000",
                colorLight : "#ffffff",
                correctLevel : QRCode.CorrectLevel.H // ë†’ì€ ì—ëŸ¬ ë³´ì • ë ˆë²¨
            });
            // ------------------------

            // --- ìƒˆë¡œ ì¶”ê°€ëœ ê¸°ëŠ¥: ì…ë ¥ í•„ë“œ ë¹„í™œì„±í™” ë° ë²„íŠ¼ ìˆ¨ê¸°ê¸° ---
            disableInputFields(); 
        });

        /**
         * OGP ë©”íƒ€ íƒœê·¸ì˜ ë‚´ìš©ì„ ë™ì ìœ¼ë¡œ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.
         * (ì£¼ì˜: ê³µìœ  í”Œë«í¼ì˜ í¬ë¡¤ëŸ¬ëŠ” JS ì‹¤í–‰ ì „ ì •ì  HTMLì„ ì½ìœ¼ë¯€ë¡œ ì™„ë²½í•˜ê²Œ ì‘ë™í•˜ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.)
         */
        function updateOGPMeta(amount, bank, holder, url) {
            const formattedAmount = formatCurrency(parseInt(amount));
            
            // Title: [ì˜ˆê¸ˆì£¼] ë‹˜ê»˜ [ê¸ˆì•¡] ì†¡ê¸ˆ ìš”ì²­
            ogTitle.setAttribute('content', `${decodeURIComponent(holder)}ë‹˜ê»˜ ${formattedAmount} ì†¡ê¸ˆ ìš”ì²­`);
            
            // Description: [ì€í–‰ëª…] [ê³„ì¢Œë²ˆí˜¸] í™•ì¸
            ogDescription.setAttribute('content', `ì€í–‰: ${decodeURIComponent(bank)}, ê³„ì¢Œ: ${accountInput.value.trim()}. ì§€ê¸ˆ ë°”ë¡œ ì†¡ê¸ˆí•˜ì„¸ìš”!`);
            
            // URL
            ogUrl.setAttribute('content', url);
        }


        /**
         * ìƒì„±ëœ ë§í¬ë¥¼ í´ë¦½ë³´ë“œì— ë³µì‚¬í•©ë‹ˆë‹¤.
         */
        copyLinkBtn.addEventListener('click', () => {
            // generatedLinkInputì˜ ê°’ ë³µì‚¬
            copyToClipboard(generatedLinkInput.value, generatedLinkInput);

            // ë³µì‚¬ ì„±ê³µ ì‹œ ë²„íŠ¼ í…ìŠ¤íŠ¸ ë³€ê²½ í”¼ë“œë°± 
            copyLinkBtn.textContent = 'âœ… ë³µì‚¬ ì™„ë£Œ!';
            copyLinkBtn.classList.add('bg-green-500', 'hover:bg-green-500');
            copyLinkBtn.classList.remove('bg-indigo-600', 'hover:bg-indigo-700');
            setTimeout(() => {
                copyLinkBtn.textContent = 'ë³µì‚¬';
                copyLinkBtn.classList.remove('bg-green-500', 'hover:bg-green-500');
                copyLinkBtn.classList.add('bg-indigo-600', 'hover:bg-indigo-700');
            }, 1500);
        });

        /**
         * URL íŒŒë¼ë¯¸í„°ë¥¼ í™•ì¸í•˜ê³  ë°ì´í„°ë¥¼ ë³µì›í•˜ì—¬ í‘œì‹œí•©ë‹ˆë‹¤.
         */
        function checkAndDisplayData() {
            // í˜ì´ì§€ ë¡œë“œ ì‹œ OGP URLì„ í˜„ì¬ URLë¡œ ì„¤ì •
            ogUrl.setAttribute('content', window.location.href);

            const urlParams = new URLSearchParams(window.location.search);
            
            // í•„ìˆ˜ íŒŒë¼ë¯¸í„° í™•ì¸: a (amount), b (bank), c (account), d (holder)
            const amount = urlParams.get('a');
            const bank = urlParams.get('b');
            const account = urlParams.get('c');
            const holder = urlParams.get('d');

            // --- OGP íƒœê·¸ ì—…ë°ì´íŠ¸ (í˜ì´ì§€ê°€ íŒŒë¼ë¯¸í„°ì™€ í•¨ê»˜ ë¡œë“œë  ë•Œ) ---
            if (amount && bank && holder) {
                 updateOGPMeta(amount, bank, holder, window.location.href);
            }
            
            if (amount && bank && account && holder) {
                // ë°ì´í„°ê°€ ìˆì„ ê²½ìš°: ê²°ê³¼ í‘œì‹œ ì„¹ì…˜ í™œì„±í™”
                inputSection.classList.add('hidden');
                resultSection.classList.remove('hidden');
                
                // ë³µì›ëœ ë°ì´í„°
                const decodedBank = decodeURIComponent(bank);
                const decodedAccount = decodeURIComponent(account);
                const decodedHolder = decodeURIComponent(holder);

                document.getElementById('displayAmount').textContent = formatCurrency(parseInt(amount));
                document.getElementById('displayBank').textContent = decodedBank;
                document.getElementById('displayAccount').textContent = decodedAccount;
                document.getElementById('displayHolder').textContent = decodedHolder;

                // --- ì •ì‚° ìš”ì²­ í˜ì´ì§€ ë³µì‚¬ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€ ---
                
                // ì€í–‰ëª… ë³µì‚¬
                copyBankElement.addEventListener('click', () => {
                    copyToClipboard(decodedBank, copyBankElement);
                });
                
                // ê³„ì¢Œë²ˆí˜¸ ë³µì‚¬
                copyAccountElement.addEventListener('click', () => {
                    copyToClipboard(decodedAccount, copyAccountElement);
                });

                // ì˜ˆê¸ˆì£¼ ë³µì‚¬
                copyHolderElement.addEventListener('click', () => {
                    copyToClipboard(decodedHolder, copyHolderElement);
                });
                // ------------------------------------------

            } else {
                // ë°ì´í„°ê°€ ì—†ì„ ê²½ìš°: ì…ë ¥ í¼ ì„¹ì…˜ í™œì„±í™”
                inputSection.classList.remove('hidden');
                resultSection.classList.add('hidden');
            }
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì •ì‚° ë°ì´í„° ë³µì› ë¡œì§ ì‹¤í–‰
        window.onload = checkAndDisplayData;
    </script>
</body>
</html>
